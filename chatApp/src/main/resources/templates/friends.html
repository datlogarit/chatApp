<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh sách bạn bè</title>
    <link rel="stylesheet" th:href="@{/css/friends.css}">
</head>

<body>
    <div class="friends-container">
        <div class="page-title">Bạn bè</div>

        <!-- Tìm kiếm bạn bè -->
        <form class="friends-search" th:action="@{/friends}" method="get">
            <input class="friends-search-input" type="text" name="q" th:value="${q}"
                placeholder="Tìm bạn bè theo username..." />
            <button class="friends-search-btn" type="submit">Tìm</button>
        </form>

        <div th:if="${#lists.isEmpty(friends)}" class="empty-state">
            Bạn chưa có bạn bè nào. Hãy tìm và kết bạn để tham gia cuộc chat.
        </div>

        <div th:if="${!#lists.isEmpty(friends)}" class="friends-grid">
            <div class="friend-card" th:each="friend : ${friends}">
                <div class="friend-avatar" th:text="${friend.username.substring(0,1).toUpperCase()}">A</div>
                <div class="friend-name" th:text="${friend.username}">Nguyen Van A</div>
                <div class="friend-info" th:text="${'Username: ' + friend.username}">Username: nva</div>
                <div class="friend-actions">
                    <a class="btn btn-chat" th:href="@{'/chat'(user=${friend.username})}">Chat</a>
                    <form th:action="@{'/friends/' + ${friend.id} + '/delete'}" method="post" th:object="${friend}">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                        <button class="btn btn-delete" type="submit">Xóa bạn</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

</html>